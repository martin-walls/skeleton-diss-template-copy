% Global minted options
\setminted{frame=lines,
           framerule=0.5pt,
           framesep=6pt,
           autogobble}

% C
\newminted[CListing]{c}{fontsize=\small}
\newmintedfile[CInputListing]{c}{fontsize=\small}
\newmintinline[CInline]{c}{}
\definecolor{CKeywordHighlight}{HTML}{008700}
\NewDocumentCommand{\CKeyword}{m}{\textcolor{CKeywordHighlight}{\textbf{\texttt{#1}}}}

% JavaScript
\newmintinline[JSInline]{JavaScript}{}

% Parse grammars
\newminted[GrammarListing]{abnf}{fontsize=\small}
\newmintinline[GrammarInline]{abnf}{}

% Rust
\newminted[RustListing]{rust}{fontsize=\small}
\newmintedfile[RustInputListing]{rust}{fontsize=\small}
\newmintinline[RustInline]{rust}{}

% WebAssembly (text format)
\newminted[WasmListing]{wat}{escapeinside=||, fontsize=\small}
\newmintinline[WasmInline]{wat}{escapeinside=||}

\definecolor{WasmTypeHighlight}{HTML}{333399}
\NewDocumentCommand{\WasmType}{m}{\texttt{\textbf{\textcolor{WasmTypeHighlight}{#1}}}}
\definecolor{WasmInstrHighlight}{HTML}{007021}
\NewDocumentCommand{\WasmInstr}{m}{\textcolor{WasmInstrHighlight}{\texttt{#1}}}

\definecolor{IrTypeHighlight}{HTML}{333399}
\NewDocumentCommand{\IrType}{m}{\textcolor{IrTypeHighlight}{\textbf{\texttt{#1}}}}
\definecolor{IrCodeHighlight}{HTML}{333399}
\NewDocumentCommand{\IrCode}{m}{\textcolor{IrCodeHighlight}{\texttt{#1}}}

\newminted[TextListing]{text}{escapeinside=||, fontsize=\small}

\NewDocumentCommand{\Filename}{m}{\texttt{#1}}
\NewDocumentCommand{\Dirname}{m}{\textbf{\texttt{#1/}}}

% pseudocode environment
\usepackage{algpseudocode}
% floating algorithm environment
\usepackage{algorithm}

% pseudocode environment
\NewDocumentEnvironment{PseudocodeListing}{}
  {%
    \rule{\textwidth}{0.5pt}%
    \vspace{-2pt}%
    \begin{adjustwidth}{-1em}{0pt}%
    \begin{algorithmic}[0]%
  }{%
    \end{algorithmic}%
    \end{adjustwidth}%
    \vspace{-8pt}%
    \rule{\textwidth}{0.5pt}%
  }

% match x ... end match block for pseudocode
\algblockdefx[Match]{Match}{EndMatch}%
  [1]{\textbf{match} #1}%
  {\textbf{end match}}
\algblockdefx[MatchCase]{MatchCase}{EndMatchCase}
  [1]{\textbf{case} #1}
  {\textbf{end case}}

\NewDocumentCommand{\CodeComment}{m}{\triangleright~#1}

